<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>SUBU-TETRA EMT İZLEME MERKEZİ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: white;
      text-align: center;
    }
    h1 {
      margin-top: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 40px;
    }
    .card {
      background: #1e293b;
      padding: 30px;
      border-radius: 12px;
      font-size: 24px;
    }
    .value {
      font-size: 40px;
      margin-top: 10px;
      color: #38bdf8;
    }
    .time {
      grid-column: span 2;
      background: #020617;
    }
  </style>
</head>
<body>

<h1>SUBU-TETRA EMT İZLEME MERKEZİ</h1>

<div class="grid">
  <div class="card">
    Araç Hızı (km/h)
    <div class="value" id="speed">-</div>
  </div>

  <div class="card">
    Batarya Sıcaklığı (°C)
    <div class="value" id="temp">-</div>
  </div>

  <div class="card">
    Batarya Gerilimi (V)
    <div class="value" id="voltage">-</div>
  </div>

  <div class="card">
    Kalan Enerji (Wh)
    <div class="value" id="energy">-</div>
  </div>

  <div class="card time">
    Zaman / Tarih
    <div class="value" id="time">-</div>
  </div>
</div>

<script>
async function updateData() {
  try {
    const res = await fetch("/last");
    const data = await res.json();

    if (!data) return;

    document.getElementById("speed").innerText = data.speed;
    document.getElementById("temp").innerText = data.temp;
    document.getElementById("voltage").innerText = data.voltage;
    document.getElementById("energy").innerText = data.energy;
    document.getElementById("time").innerText =
      new Date(data.timestamp).toLocaleString();
  } catch (err) {
    console.log("Veri bekleniyor...");
  }
}

setInterval(updateData, 1000);
</script>

</body>
</html>
